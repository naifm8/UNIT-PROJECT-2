{% extends 'base.html' %}
{% block content %}
  <h2>Register</h2>
<!-- Register Form -->
<form method="post">
  {% csrf_token %}

  <!-- Username -->
  <div class="mb-3">
    <label>Username</label>
    {{ form.username }}
    {% if form.username.errors %}
      <div class="text-danger small">{{ form.username.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Email -->
  <div class="mb-3">
    <label>Email</label>
    {{ form.email }}
    {% if form.email.errors %}
      <div class="text-danger small">{{ form.email.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Role -->
  <div class="mb-3">
    <label>Role</label>
    {{ form.role }}
    {% if form.role.errors %}
      <div class="text-danger small">{{ form.role.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Coach-specific fields -->
  <div id="coach-fields" style="display: none;">
    <div class="mb-3">
      <label>Sport</label>
      {{ form.sport }}
      {% if form.sport.errors %}
        <div class="text-danger small">{{ form.sport.errors.0 }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label>Experience (years)</label>
      {{ form.experience_years }}
      {% if form.experience_years.errors %}
        <div class="text-danger small">{{ form.experience_years.errors.0 }}</div>
      {% endif %}
    </div>
  </div>

  <!-- Password -->
  <div class="mb-3">
    <label>Password</label>
    {{ form.password1 }}
    {% if form.password1.errors %}
      <div class="text-danger small">{{ form.password1.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Confirm Password -->
  <div class="mb-3">
    <label>Confirm Password</label>
    {{ form.password2 }}
    {% if form.password2.errors %}
      <div class="text-danger small">{{ form.password2.errors.0 }}</div>
    {% endif %}
  </div>

  <button type="submit" class="btn btn-dark w-100">Register</button>
</form>

<script>
  const roleField = document.getElementById("id_role");
  const coachFields = document.getElementById("coach-fields");

  function toggleCoachFields() {
    if (roleField.value === "coach") {
      coachFields.style.display = "block";
    } else {
      coachFields.style.display = "none";
    }
  }

  if (roleField) {
    roleField.addEventListener("change", toggleCoachFields);
    document.addEventListener("DOMContentLoaded", toggleCoachFields);
  }
</script>


{% endblock %}
